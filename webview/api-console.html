<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test</title>
    <link rel="stylesheet" href="{{STYLE_URI}}">
</head>

<body>
    <!-- Toast notification container -->
    <div class="toast-container" id="toastContainer"></div>

    <div class="container">
        <!-- 顶部请求栏 -->
        <div class="header-section">
            <div class="url-section">
                <div class="http-method" id="httpMethod">GET</div>
                <div class="base-url-container">
                    <select class="base-url-select" id="baseUrlSelect">
                        <option value="">Select Base URL</option>
                    </select>
                </div>
                <input type="text" class="route-input" id="routeInput" placeholder="/api/route" />
                <button class="debug-button" id="debugButton">Debug</button>
                <button class="send-button" id="sendButton">Send</button>
                <button class="manage-baseurl-btn" id="manageBaseUrlBtn" title="Manage Base URLs">⚙️</button>
                <div class="history-section">
                    <select class="history-select" id="historySelect">
                        <option value="">History</option>
                    </select>
                    <button class="remove-button" id="clearHistoryBtn" type="button">Clear</button>
                </div>
            </div>
        </div>

        <!-- 下方左右分栏 -->
        <div class="main-content">
            <div class="left-panel">
                <div class="request-section">

                    <div class="tabs">
                        <div class="tab active" data-tab="body">Body</div>
                        <div class="tab" data-tab="auth">Auth</div>
                        <div class="tab" data-tab="headers">Headers</div>
                        <div class="tab" data-tab="query">Query</div>
                    </div>

                    <div id="bodyTab" class="tab-content active">
                        <div class="body-mode-tabs">
                            <button class="body-mode-tab active" data-body-mode="json" type="button">JSON</button>
                            <button class="body-mode-tab" data-body-mode="formdata" type="button">FormData</button>
                            <button class="body-mode-tab" data-body-mode="binary" type="button">Binary</button>
                            <div class="body-mode-spacer"></div>
                            <span class="json-validity-badge" id="jsonValidityBadge"></span>
                            <button type="button" class="json-format-btn" id="formatJsonBtn">Format</button>
                        </div>

                        <div class="body-mode-content">
                            <div class="body-mode-panel active" id="bodyModeJson">
                                <div class="json-editor-container" id="jsonEditorContainer">
                                    <pre class="json-editor-highlight"
                                        aria-hidden="true"><code id="bodyEditorHighlight"></code></pre>
                                    <textarea class="body-editor" id="bodyEditor" placeholder="Enter JSON body here..."
                                        spellcheck="false"></textarea>
                                </div>
                            </div>
                            <div class="body-mode-panel" id="bodyModeFormData">
                                <div class="formdata-content-type" id="formDataContentTypeHint">Content-Type:
                                    multipart/form-data</div>
                                <div class="formdata-header-row">
                                    <div class="formdata-col-enabled" id="formDataHeaderUse">Use</div>
                                    <div class="formdata-col-key" id="formDataHeaderKey">Key</div>
                                    <div class="formdata-col-type" id="formDataHeaderType">Type</div>
                                    <div class="formdata-col-value" id="formDataHeaderValue">Value</div>
                                    <div class="formdata-col-actions" id="formDataHeaderActions">Actions</div>
                                </div>
                                <div class="formdata-list" id="formDataList"></div>
                                <div class="formdata-actions">
                                    <button type="button" class="add-button" id="addFormDataRowBtn">Add Row</button>
                                    <button type="button" class="remove-button" id="clearDisabledFormDataBtn">Clear
                                        Disabled</button>
                                </div>
                            </div>
                            <div class="body-mode-panel" id="bodyModeBinary">
                                <label class="binary-file-label" for="binaryFileInput">Binary File</label>
                                <div class="binary-file-row">
                                    <button type="button" class="binary-file-select-btn"
                                        id="binaryFileSelectBtn">选择文件</button>
                                    <span class="binary-file-name" id="binaryFileName">未选择任何文件</span>
                                </div>
                                <input class="binary-file-input" type="file" id="binaryFileInput" />
                            </div>
                        </div>
                    </div>

                    <div id="authTab" class="tab-content">
                        <div class="auth-type-selector">
                            <button class="auth-type-btn active" data-auth-type="bearer">Bearer</button>
                            <button class="auth-type-btn disabled" data-auth-type="basic" disabled
                                title="Coming soon">Basic</button>
                            <!-- <button class="auth-type-btn disabled" data-auth-type="oauth2" disabled
                                title="Coming soon">OAuth 2</button>
                            <button class="auth-type-btn disabled" data-auth-type="ntlm" disabled
                                title="Coming soon">NTLM</button>
                            <button class="auth-type-btn disabled" data-auth-type="aws" disabled
                                title="Coming soon">AWS</button> -->
                        </div>

                        <div class="auth-content">
                            <div class="auth-section active" id="authBearer">
                                <!-- <label class="bearer-token-label">Bearer Token</label> -->
                                <textarea class="bearer-token-input" id="tokenInput"
                                    placeholder="token (Bearer prefix optional)"></textarea>
                            </div>
                        </div>
                    </div>

                    <div id="headersTab" class="tab-content">
                        <div class="param-list" id="headersList">
                            <!-- Headers will be populated by JavaScript -->
                        </div>
                        <button class="add-button" id="addHeaderBtn">Add</button>
                    </div>

                    <div id="queryTab" class="tab-content">
                        <textarea class="query-string-input" id="queryStringInput"></textarea>
                        <div class="param-list" id="queryList">
                            <!-- Query parameters will be populated by JavaScript -->
                        </div>
                        <button class="add-button" id="addQueryBtn">Add</button>
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="response-section">
                    <div id="responseContent">
                        <!-- 响应区域：始终显示，初始为空 -->
                        <div id="responseDisplay" style="display: flex; height: 100%; flex-direction: column;">
                            <div class="response-header-bar">
                                <div class="response-tabs">
                                    <div class="response-tab active" data-response-tab="body">Response</div>
                                    <div class="response-tab" data-response-tab="headers">
                                        Headers
                                        <span class="response-tab-badge" id="headerCount">0</span>
                                    </div>
                                </div>
                                <div class="status-bar">
                                    <div class="status-item">
                                        <span class="status-label">Status:</span>
                                        <span class="status-value" id="statusValue">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Size:</span>
                                        <span class="status-value info" id="sizeValue">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">Time:</span>
                                        <span class="status-value" id="timeValue">-</span>
                                    </div>
                                </div>
                            </div>
                            <div class="response-content">
                                <div class="response-tab-panel active" id="bodyPanel">
                                    <div class="response-body">
                                        <div class="line-numbers" id="lineNumbers"></div>
                                        <div class="code-wrapper">
                                            <pre class="code-content" tabindex="0"
                                                id="responseBodyWrapper"><code id="responseBody"></code></pre>
                                        </div>
                                    </div>
                                </div>
                                <div class="response-tab-panel" id="headersPanel">
                                    <div class="response-headers" id="responseHeaders"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Base URL Management Modal -->
    <div class="modal" id="manageBaseUrlModal">
        <div class="modal-content" style="width: 600px; max-width: 95%;">
            <div class="modal-body">
                <div class="base-url-list" id="baseUrlListContainer">
                    <!-- Base URL 列表将动态生成 -->
                </div>
                <button class="add-button" id="addNewBaseUrlBtn" style="width: 100%; margin-top: 10px;">+ Add Base
                    URL</button>
            </div>
            <div class="modal-footer">
                <button class="icon-btn cancel" id="cancelManageBtn" title="Cancel">✕</button>
                <button class="icon-btn save" id="saveManageBtn" title="Save">✓</button>
            </div>
        </div>
    </div>

    <script src="{{SCRIPT_URI}}"></script>
</body>

</html>